[μ¨λΌμΈ λ°λ¨!](https://geocode.gimi9.com/) | [λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”©μ— λ€ν•΄ μ•„μ‹λ‚μ”?](https://gimi9.com/blog/reverse-geocoding/)

κ°„νΈν•κ² μ„¤μΉν•  μ μκ³  λ¦¬μ†μ¤ μ‚¬μ©μ΄ μ μΌλ©΄μ„λ„ μ΄κ³ μ† μ„±λ¥μ„ μ κ³µν•λ” μ…€ν”„ νΈμ¤ν… κ°€λ¥ν• μ¤ν”μ†μ¤ μ§€μ¤μ½”λ”© λ° λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”© API.

![μ§€μ¤μ½”λ”©](https://github.com/user-attachments/assets/24df3aed-37d4-4c02-8569-42ee471551b9)

# μ§€μ¤μ½”λ”© API μμ‹

## Simple μ§€μ¤μ½”λ”©

Request
> [http://localhost:4001/geocode?q=μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10](http://localhost:4001/geocode?q=%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C%20%EC%86%A1%ED%8C%8C%EA%B5%AC%20%EC%86%A1%ED%8C%8C%EB%8C%80%EB%A1%9C8%EA%B8%B8%2010)

Response
```json
{
  "total_time": 0.007039785385131836,
  "total_count": 1,
  "success_count": 1,
  "fail_count": 0,
  "results": [
    {
      "x": 967118,
      "y": 1942008,
      "z": "05813",
      "hc": "1171064600",
      "lc": "1171010900",
      "rc": "117104169355",
      "bn": "1171010900102530005000001",
      "h1": "μ„μΈ",
      "rm": "μ†΅νλ€λ΅8κΈΈ",
      "bm": [
        "μ†΅ννμΈ13",
        "μ†΅ννμΈ13",
        ""
      ],
      "success": true,
      "errmsg": "",
      "h1_cd": "11",
      "h2_cd": "11710",
      "kostat_h1_cd": "11",
      "kostat_h2_cd": "11240",
      "hash": "μ†΅ν_μ†΅νλ€λ΅8κΈΈ_10-0",
      "address": "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10",
      "addressCls": "ROAD_ADDRESS",
      "toksString": "H1\tμ„μΈνΉλ³„μ‹\nH23\tμ†΅νκµ¬\nROAD\tμ†΅νλ€λ΅8κΈΈ\nκ±΄λ²\t10",
      "x_axis": 127.12810603742214,
      "y_axis": 37.476715383128074,
      "inputaddr": "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10"
    }
  ]
}
```


## μ—¬λ¬ κ°μ μ£Όμ† μ§€μ¤μ½”λ”©

μ—¬λ¬ μ£Όμ†λ¥Ό ν• λ²μ— μ§€μ¤μ½”λ”©ν•λ” λ°©λ²•μ€ κ°„λ‹¨ν•©λ‹λ‹¤. κ° μ£Όμ†λ¥Ό λ°°μ—΄μ— λ„£κ³  POSTλ΅ μ”μ²­ν•μ„Έμ”.

### curl μ

```bash
curl -X 'POST' \
  'http://localhost:4001/batch_geocode' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "q": [
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10",
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ–‘μ¬λ€λ΅72κΈΈ 20",
    "μ„μΈνΉλ³„μ‹ κµ¬λ΅κµ¬ κ³ μ²™λ΅21λ‚κΈΈ 85-6",
    "μ„μΈνΉλ³„μ‹ λ…Έμ›κµ¬ μ›”κ³„λ΅53κΈΈ 21",
    "μ„μΈνΉλ³„μ‹ μ„μ΄κµ¬ λ°”μ°λ«Όλ΅ 91"
  ]
}'
```

### python μ

```python
import requests

url = 'http://localhost:4001/batch_geocode'
headers = {
  'accept': 'application/json',
}
data = {
  "q": [
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10",
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ–‘μ¬λ€λ΅72κΈΈ 20",
    "μ„μΈνΉλ³„μ‹ κµ¬λ΅κµ¬ κ³ μ²™λ΅21λ‚κΈΈ 85-6",
    "μ„μΈνΉλ³„μ‹ λ…Έμ›κµ¬ μ›”κ³„λ΅53κΈΈ 21",
    "μ„μΈνΉλ³„μ‹ μ„μ΄κµ¬ λ°”μ°λ«Όλ΅ 91"
  ]
}

response = requests.post(url, headers=headers, json=data)
print(response.json())
```

### javascript μ

```javascript
const axios = require('axios');

const url = 'http://localhost:4001/batch_geocode';
const headers = {
  'accept': 'application/json',
};
const data = {
  q: [
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10",
    "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ–‘μ¬λ€λ΅72κΈΈ 20",
    "μ„μΈνΉλ³„μ‹ κµ¬λ΅κµ¬ κ³ μ²™λ΅21λ‚κΈΈ 85-6",
    "μ„μΈνΉλ³„μ‹ λ…Έμ›κµ¬ μ›”κ³„λ΅53κΈΈ 21",
    "μ„μΈνΉλ³„μ‹ μ„μ΄κµ¬ λ°”μ°λ«Όλ΅ 91"
  ]
};

axios.post(url, data, { headers })
  .then(response => {
    console.log(response.data);
  })
  .catch(error => {
    console.error('Error:', error);
  });
```

### Response

```json
{
  "total_time": 0.008105278015136719,
  "total_count": 5,
  "success_count": 5,
  "fail_count": 0,
  "results": [
    {
      "x": 967118,
      "y": 1942008,
      "z": "05813",
      "hc": "1171064600",
      "lc": "1171010900",
      "rc": "117104169355",
      "bn": "1171010900102530005000001",
      "h1": "μ„μΈ",
      "rm": "μ†΅νλ€λ΅8κΈΈ",
      "bm": [
        "μ†΅ννμΈ13",
        "μ†΅ννμΈ13",
        ""
      ],
      "success": true,
      "errmsg": "",
      "h1_cd": "11",
      "h2_cd": "11710",
      "kostat_h1_cd": "11",
      "kostat_h2_cd": "11240",
      "hash": "μ†΅ν_μ†΅νλ€λ΅8κΈΈ_10-0",
      "address": "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10",
      "addressCls": "ROAD_ADDRESS",
      "toksString": "H1\tμ„μΈνΉλ³„μ‹\nH23\tμ†΅νκµ¬\nROAD\tμ†΅νλ€λ΅8κΈΈ\nκ±΄λ²\t10",
      "x_axis": 127.12810603742214,
      "y_axis": 37.476715383128074,
      "inputaddr": "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ†΅νλ€λ΅8κΈΈ 10"
    },
μƒλµ...
  ]
}
```

## λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”©

μΆν‘(μ„λ„μ™€ κ²½λ„)μ— ν•΄λ‹Ήν•λ” μ£Όμ†λ¥Ό μ°Ύμµλ‹λ‹¤.

![image](https://github.com/user-attachments/assets/9da15c87-0cfa-43c1-a353-8712d1efbea7)


### Request

> http://localhost:4001/reverse_geocode/?x=127.12771948485866&y=37.47699735340699

### Response

```json
{
"PNU": "1171010900108390005",
"yyyymm": "202404",
"address": "μ„μΈνΉλ³„μ‹ μ†΅νκµ¬ μ¥μ§€λ™ 839-5λ²μ§€",
"success": true,
"geom": "POLYGON ((127.127924 37.476489, 127.127981 37.476459, 127.127644 37.476489, 127.127639 37.476490, 127.127685 37.476530, 127.127651 37.476725, 127.127651 37.476726, 127.127613 37.476939, 127.127612 37.476946, 127.127607 37.476976, 127.127584 37.477093, 127.127569 37.477158, 127.127557 37.477209, 127.127525 37.477325, 127.127511 37.477371, 127.127510 37.477375, 127.127490 37.477440, 127.127449 37.477554, 127.127438 37.477583, 127.127435 37.477590, 127.127405 37.477667, 127.127356 37.477778, 127.127349 37.477794, 127.127351 37.477794, 127.127351 37.477794, 127.127313 37.477872, 127.127279 37.477941, 127.127186 37.478126, 127.127133 37.478232, 127.127097 37.478309, 127.127081 37.478346, 127.127051 37.478415, 127.127016 37.478499, 127.126984 37.478585, 127.126954 37.478673, 127.126929 37.478752, 127.126923 37.478768, 127.126898 37.478856, 127.126875 37.478944, 127.126852 37.479042, 127.126821 37.479206, 127.126785 37.479442, 127.126692 37.479489, 127.127058 37.479583, 127.127005 37.479503, 127.127033 37.479300, 127.127047 37.479210, 127.127059 37.479147, 127.127071 37.479088, 127.127085 37.479023, 127.127100 37.478961, 127.127117 37.478899, 127.127134 37.478838, 127.127152 37.478777, 127.127173 37.478715, 127.127193 37.478655, 127.127216 37.478594, 127.127239 37.478534, 127.127268 37.478466, 127.127298 37.478398, 127.127331 37.478328, 127.127446 37.478168, 127.127571 37.477916, 127.127598 37.477781, 127.127645 37.477667, 127.127709 37.477494, 127.127839 37.477158, 127.127877 37.476951, 127.127862 37.476840, 127.127914 37.476550, 127.127924 37.476489))",
"errmsg": ""
}
```

## /docs

RESTful APIλ¥Ό μ„¤κ³„, λ¬Έμ„ν™”, ν…μ¤νΈν•κΈ° μ„ν• [Swagger](https://swagger.io/) κΈ°λ°μ λ„κµ¬λ¥Ό μ κ³µν•©λ‹λ‹¤.

[μ¨λΌμΈ λ¬Έμ„](http://localhost:4001/docs#/)

![image](https://github.com/user-attachments/assets/034b7c7f-6a3b-4c15-a454-7da784ef94df)


## μ„¤μΉ

κ°„λ‹¨ν• μ„¤μΉ. DBMS ν•„μ” μ—†μ

```bash
git clone https://github.com/your-repo/geocoder-kr.git
cd geocoder-kr
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### λ°μ΄ν„° λ‹¤μ΄λ΅λ“

[Geocoding λ°μ΄ν„° λ‹¤μ΄λ΅λ“](https://geocode.gimi9.com/static/download/rocks.tar.gz)

[Reverse Geocoding λ°μ΄ν„° λ‹¤μ΄λ΅λ“](https://geocode.gimi9.com/static/download/rocks-reverse-geocoder.tar.gz)

λ‹¤μ΄λ΅λ“ν• νμΌμ„ μ„¤μΉ λ””λ ‰ν† λ¦¬(geocode-kr)μ— λ‹¤μκ³Ό κ°™μ΄ λ³µμ‚¬ν•μ„Έμ”.

```bash
 π“‚ db                                       [13GB]
    β”β”€β”€ π“‚ rocks                             [4GB 276κ°μ νμΌ] μ§€μ¤μ½”λ”©
    β”‚   β”β”€β”€ π“„ 000441.sst [961B]
    β”‚   β”β”€β”€ π“„ 004154.sst [65MB]
    β”‚   β”β”€β”€ π“„ 004155.sst [65MB]
    β”‚   β””β”€β”€ π“„ 004156.sst [65MB]
    β””β”€β”€ π“‚ rocks-reverse-geocoder            [9GB 208κ°μ νμΌ] λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”©
        β”β”€β”€ π“„ 005440.sst [65MB]
        β”β”€β”€ π“„ 005441.sst [65MB]
        β”β”€β”€ π“„ 005443.sst [65MB]
        β””β”€β”€ π“„ 005444.sst [65MB]
```

## μμ£Ό λ¬»λ” μ§λ¬Έ

### geocode.gimi9.comμ API μ„λ²„λ¥Ό μ‚¬μ©ν•  μ μλ‚μ”?

κ·Έλ ‡μµλ‹λ‹¤. ν•μ§€λ§ κ³„μ•½μ„ ν•΄μ•Ό ν•©λ‹λ‹¤. gisman@gmail.comμΌλ΅ λ¬Έμν•΄ μ£Όμ„Έμ”.

### λ°μ΄ν„° μ—…λ°μ΄νΈλ” μ–Όλ§λ‚ μμ£Ό ν•λ‚μ”?

λ§¤μΌ ν•©λ‹λ‹¤. κ·Έλ¦¬κ³  geocode.gimi9.comμ— μ μ©ν•©λ‹λ‹¤.

λ‹¤μ΄λ΅λ“ νμΌμ€ λΉ„μ •κΈ°μ μΌλ΅ λ°°ν¬ν•©λ‹λ‹¤.

### μ–΄λ–¤ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ‚μ”?

μ§€μ¤μ½”λ”©μ€ μ£Όμ†μ •λ³΄ λ„λ¦¬μ§‘μ μ—¬λ¬ κ³µκ³µλ°μ΄ν„°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”©μ€ λΈμ΄μ›”λ“μ μ—°μ†μ§€μ λ„μ™€ κ±΄λ¬Όλ„ν• κ³µκ³µλ°μ΄ν„°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

### μ²λ¦¬ μ†λ„λ” μ–Όλ§λ‚ λΉ λ¥Έκ°€μ”?

μ§€μ¤μ½”λ”© μ†λ„λ” μ΄λ‹Ή 3μ²κ±΄ μ΄μƒμ…λ‹λ‹¤. λ¦¬λ²„μ¤ μ§€μ¤μ½”λ”©λ„ λΉ„μ·ν•©λ‹λ‹¤.

### μ„λ²„μ κ¶μ¥ μ‚¬μ–‘μ€?

CPUμ™€ λ©”λ¨λ¦¬λ” AWS EC2 t2.micro (1 vCPU, 1GiB λ©”λ¨λ¦¬) μμ¤€μ΄λ©΄ μ¶©λ¶„ν•©λ‹λ‹¤.

μ €μ¥ μ¥μΉλ” SSDλ¥Ό κ¶μ¥ν•©λ‹λ‹¤.

μ΄μ ν™κ²½μ—μ„λ” 4GB μ΄μƒμ RAMμ„ κ¶μ¥ν•©λ‹λ‹¤.

## κΈ°μ—¬

κΈ°μ—¬λ¥Ό ν™μν•©λ‹λ‹¤!

* μ§€μ¤μ½”λ”©μ΄ μ• λλ” μ£Όμ†κ°€ μμΌλ©΄ μ•λ ¤μ£Όμ„Έμ”.

## ν¬λ λ”§

* [Metaμ RocksDB](https://github.com/facebook/rocksdb)λ¥Ό μ΄μ©ν•μ—¬ κ°„λ‹¨ν• κµ¬μ΅°μ™€ λΉ λ¥Έ μ„±λ¥μ„ μ–»μ„ μ μμ—μµλ‹λ‹¤.

## μƒμ—…μ  μ΄μ©

μƒμ—…μ  μ΄μ©μ€ μ—„κ²©ν κΈμ§€λ©λ‹λ‹¤.

μμ„Έν• λ‚΄μ©μ€ [LICENSE](LICENSE) νμΌμ„ μ°Έμ΅°ν•μ‹κΈ° λ°”λλ‹λ‹¤.

λ¬Έμμ‚¬ν•­: gisman@gmail.com
